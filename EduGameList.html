<!--		SVG animation example	http://taye.me/blog/svg/a-guide-to-svg-use-elements/		-->
<head>
	<title>Educational Games</title>
	<link rel="icon" href="SGLogo.png">
	<link rel="shortcut icon" href="SGLogo.png">
</head>

<script type="text/javascript" src="SmoothScrolling.js"></script>
<script type="text/javascript" src="PageZoom.js"></script>
<script type="text/javascript" src="EduGameListJs/GameList.js"></script>
<script type="text/javascript" src="EduGameListJs/ListSort.js"></script>

<style>
	@font-face {
		font-family: OpenDyslexicAlta;
		font-weight: bold;
		src: url("open_dyslexic/OpenDyslexicAlta-Bold.otf") format("opentype");
	}

	svg {
		font-family: "OpenDyslexicAlta", "Arial";
		background-color: #23d9b0;
		padding: 0;
	}

	.button {
		transition: 0.2s;
		cursor: pointer;
		fill-opacity: 0;
	}

		.button:hover {
			fill-opacity: 0.2;
		}

	body {
		margin: 0;
		width: 100%;
		height: 100%;
	}
</style>

<body bgcolor="#23d9b0">
	<svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 1600 10000" width="100%" id="svgViewBox">
		<!--		Top Banner		-->
		<g transform="translate(0 0)">
			<rect x="-900" width="3e3" height="80" fill="#20a080" style="paint-order:normal" />
			<text x="796" y="60" font-weight="bold" stroke-width="1.5" text-anchor="middle" font-size="50px">
				Syllabus Games
			</text>
			<path d="m173 4-43 71h420l43-71z" fill="none" stroke="#5cc0a8" stroke-width="3.7795" />
			<text x="360" y="37" font-weight="bold" stroke-width="1.5" text-anchor="middle" font-size="38px" fill="#D0D0D0">
				Educational
			</text>
			<text x="344" y="70" font-weight="bold" stroke-width="1.5" text-anchor="middle" font-size="38px" fill="#D0D0D0">
				Games List
			</text>
			<path d="m1415 4 43 71h-420l-43-71z" fill="none" stroke="#5cc0a8" stroke-width="3.7795" />
			<text x="1210" y="37" font-weight="bold" stroke-width="1.5" text-anchor="middle" font-size="38px">
				Works In Progress
			</text>
			<text x="1232" y="70" font-weight="bold" stroke-width="1.5" text-anchor="middle" font-size="38px">
				and Other Projects
			</text>


			<!--		Clickable Paths		-->
			<a xlink:href="EduGameList.html" target="_parent">
				<path d="m173 4-43 71h420l43-71z" class="button" /><!--	EDU List		-->
			</a>

			<a xlink:href="index.html" target="_parent">
				<path d="m593 4h403l43 71h-490l43-71" class="button" /><!--	index		-->
			</a>

			<a xlink:href="WIP.html" target="_parent">
				<path d="m1415 4 43 71h-420l-43-71z" class="button" /><!--	WIP Page		-->
			</a>
		</g>

		<!--		List Sort Buttons		-->
		<g id="listHeader" class="txt" font-size="18" transform="translate(12 100)">
			<path d="m1564 40v-22s0-12-12-12h-1542c-10 0-10 10-10 10v24h1565" stroke="#5cc0a8" stroke-width="3" fill="#00FFFF" />

			<text y="28" x="6">Type</text>
			<rect height="26" width="55" y="10" x="4" fill-opacity="0" class="button" onclick="sortProperty(0);" />

			<text y="28" x="70">Play It?</text>
			<rect height="26" width="80" y="10" x="68" fill-opacity="0" class="button" onclick="sortProperty(1);" />

			<text y="28" x="160">Title</text>
			<rect height="26" width="370" y="10" x="158" fill-opacity="0" class="button" onclick="sortProperty(2);" />

			<text y="28" x="540">Subject</text>
			<rect height="26" width="140" y="10" x="538" fill-opacity="0" class="button" onclick="sortProperty(3);" />

			<text y="28" x="690">Subject (Specific)</text>
			<rect height="26" width="590" y="10" x="688" fill-opacity="0" class="button" onclick="sortProperty(3);" /><!--	Yes, clicking this sorts by Subject	-->

			<text y="28" x="1290">Grade</text>
			<rect height="26" width="65" y="10" x="1288" fill-opacity="0" class="button" onclick="sortProperty(5);" />

			<text y="28" x="1360">Time</text>
			<rect height="26" width="75" y="10" x="1358" fill-opacity="0" class="button" onclick="sortProperty(6);" />

			<text y="28" x="1440">Price</text>
			<rect height="26" width="55" y="10" x="1438" fill-opacity="0" class="button" onclick="sortProperty(7);" />

			<text y="28" x="1500">Form</text>
			<rect height="26" width="55" y="10" x="1498" fill-opacity="0" class="button" onclick="sortProperty(8);" />
		</g>
		<g id="gameList"></g><!--		This is the group all game list entries are added to		-->
		<!--		Download Links		-->
		<g id="downloadLinks" transform="translate(760 20000)">
			<!--	Download Excell	-->
			<text y="35" x="-132" font-size="30">Download List As:</text>
			<svg x="-130" y="45" height="80" width="82" version="1.1" xmlns:cc="http://creativecommons.org/ns#" viewBox="0 0 88 86">
				<path fill="#207245" d="m46.04 0h5.94v8c10.01 0 20.02 0.02 30.03-0.03 1.69 0.07 3.55-0.05 5.02 0.96 1.03 1.48 0.91 3.36 0.98 5.06-0.05 17.36-0.03 34.71-0.02 52.06-0.05 2.91 0.27 5.88-0.34 8.75-0.4 2.08-2.9 2.13-4.57 2.2-10.36 0.03-20.73-0.02-31.1 0v9h-6.21c-15.24-2.77-30.51-5.33-45.77-8v-69.99c15.35-2.67 30.7-5.3 46.04-8.01z" />
				<path fill="#ffffff" d="m51.98 11h33v63h-33v-6h8v-7h-8v-4h8v-7h-8v-4h8v-7h-8v-4h8v-7h-8v-4h8v-7h-8v-6z" />
				<path fill="#207245" d="m63.98 17h14v7h-14v-7z" />
				<path fill="#ffffff" d="m29.62 26.37c2.26-0.16 4.53-0.3 6.8-0.41-2.67 5.47-5.35 10.94-8.07 16.39 2.75 5.6 5.56 11.16 8.32 16.76-2.41-0.14-4.81-0.29-7.22-0.46-1.7-4.17-3.77-8.2-4.99-12.56-1.36 4.06-3.3 7.89-4.86 11.87-2.19-0.03-4.38-0.12-6.57-0.21 2.57-5.03 5.05-10.1 7.7-15.1-2.25-5.15-4.72-10.2-7.04-15.32 2.2-0.13 4.4-0.26 6.6-0.38 1.49 3.91 3.12 7.77 4.35 11.78 1.32-4.25 3.29-8.25 4.98-12.36z" />
				<g fill="#207245">
					<path d="m63.98 28h14v7h-14v-7z" />
					<path d="m63.98 39h14v7h-14v-7z" />
					<path d="m63.98 50h14v7h-14v-7z" />
					<path d="m63.98 61h14v7h-14v-7z" />
				</g>
			</svg>

			<a href="EduGameListJs/EduGameList.xlsx" download="EduGameList.xlsx">
				<rect x="-135" y="40" width="95" height="95" class="button" />
			</a>


			<!--	Download CSV	-->
			<svg x="-30" y="33" height="110" width="110" stroke="#000000" stroke-width="5" viewBox="0 0 200 200">
				<path d="m49 24h65l35 36v100c0 4-3 7-7 7h-93c-4 0-7-3-7-7v-129c0-4 3-7 7-7z" fill="#EEEEEE" />
				<path d="m114 24c 0 11.6558 0 30.6732 0 36 11 0 22 0 35 0h-0.00018l" fill="none" />
				<text y="123" x="44" font-size="45">CSV</text>
			</svg>
			<a href="EduGameListJs/EduGameList.csv" download="EduGameList.xlsx">
				<rect x="-25" y="40" width="95" height="95" class="button" />
			</a>

			<!--	Google Sheets	-->
			<svg x="70" y="30" height="110" width="110" viewBox="0 0 192 192">
				<path fill-rule="evenodd" fill="#23a565" d="m49.4714 24h65.1885l35.4002 35.9756v100.493c0 4.142-3.3891 7.5311-7.5312 7.5311h-93.0575c-4.1421 0-7.5312-3.3891-7.5312-7.5311v-128.938c0-4.142 3.3891-7.531 7.5312-7.531z" />
				<path fill="none" d="m120.24 59.52h29.9999c5.38857 48.8002-12.7985 11.2229-29.9999 0z" />
				<g fill-rule="evenodd">
					<path fill="#ffffff" d="m64.9416 90.2431h61.9688v52.5754h-61.9688v-52.5754zm6.3874 37.4245h21.9328v9.0874h-21.9328v-9.0874zm27.2612-31.3613h21.9328v9.0874h-21.9328v-9.0874zm0 31.3613h21.9328v9.0874h-21.9328v-9.0874zm0-15.6807h21.9328v9.0874h-21.9328v-9.0874zm-27.2612-15.6807h21.9328v9.0874h-21.9328v-9.0874zm0 15.6806h21.9328v9.0874h-21.9328v-9.0874z" />
					<path d="m119.944 59.9627 30.1224 29.1228v-29.1153z" fill="#007d3f" />
					<path fill="#8bd1b5" d="m150.06 59.9756-35.4-35.9756v28.5405c0 4.0894 3.3458 7.4351 7.4352 7.4351h27.965z" />
				</g>
			</svg>
			<a xlink:href="https://docs.google.com/spreadsheets/d/1EIIjerj8TSJW46YZeHuN1IqoCR6MVXGjn9VA5cvj-bg/edit?usp=sharing" target="_parent">
				<rect x="78" y="40" width="95" height="95" class="button" />
			</a>

		</g>
	</svg>
</body>

<script>

	var xmlns = "http://www.w3.org/2000/svg";
	var xlinkns = "http://www.w3.org/1999/xlink";

	var pos = 140;
	var t = performance.now();//		record to see total load time for this page
	var k = 0;
	var svg = document.getElementsByTagName('svg')[0];
	var header;
	var screenShot;

	//	HVS V=0.781 S=0.914		H=0.45	H=0.48		H=0.51		H=0.42
	var backgroundColors = ['#33E9B2', '#33E9D3', '#33DEE9'];

	//	set up the search input field
	var mainInput = document.createElement("p");
	mainInput.setAttribute("contentEditable" , "true");
	mainInput.style = "position:absolute;left:60px;top:50px;width:1480px;font-size:35px; font-family:'Arial'; background-color: #FFFFFFBB; border:1px solid #AAAAAA;";
	mainInput.innerHTML = "";
	mainInput.style.display = "none";
	mainInput.style.zIndex = "990";//		input field should always be above everything except Play/Pause button which is on 991 (and so will any input fields made by cloning it)
	document.body.appendChild(mainInput);
	mainInput.style.display = "none";
	var searchString;
	var useSearch = false;
	
	
	//	----------------------------------		[   ReSort List   ]		----------------------------------
	function sortProperty(typ) {//		called from SVG buttons above
		if (sortVar[0] == typ) {//		double clicked the sort button
			list.reverse();
			listUpdate();
			return;
		}
		//		shift every sort property down one and assign the new one as the primary sort variable
		sortVar[2] = sortVar[1];
		sortVar[1] = sortVar[0];
		sortVar[0] = typ;
		list.sort(sortList);
		listUpdate();
	}

	var sortVar = [3, 1, 0];//	sort by subject [3], then rating[1], then type[0]

	//	----------------------------------		[   Sort list called   ]		----------------------------------
	list.sort(sortList);//		see GameList.js and ListSort.js
	//	0		1		2		3					4							5	6	7		8		9			10									11	12	13
	//["Edu","No","Run Marco!","Programming","Basic Programming (Drag 'n drop)","4+","1","0","Web","RunMarko","https://www.brainpop.com/games/runmarco/",,,true],
	//		list element 11 is the property it is sorted by, 12 is the dom element holding it, and 13 is true/false for whether it is displayed or not

	var gameList = document.getElementById("gameList");

	//	----------------------------------		[   Create SVG List Elements   ]		----------------------------------
	for (i = 0; i < list.length; i++) {
		var entry = document.createElementNS(xmlns, "g");
		gameList.appendChild(entry);
		//		create each entry in the game list as an SVG
		entry.innerHTML = '<rect height = "40" width = "1564" stroke = "#5cc0a8" id=' + i.toString() + ' stroke-width="3" fill="' + backgroundColors[i % 3] + '"/>\
					<path d="m1495 10v23m-60-23v23m-80-23v23m-60-23v23m-610-23v23m-150-23v23m-380-23v23m-90-23v23" stroke="#5cc0a8" stroke-width="3"/>\
					<text y="28" x="6" font-size="18">' + list[i][0] + '</text>\
					<text y="28" x="70" font-size="18">' + list[i][1] + '</text>\
					<text y="28" x="160" font-size="18">' + list[i][2] + '</text>\
					<text y="28" x="540" font-size="18">' + list[i][3] + '</text>\
					<text y="28" x="690" font-size="18">' + list[i][4] + '</text>\
					<text y="28" x="1300" font-size="18">' + list[i][5] + '</text>\
					<text y="28" x="1360" font-size="18">' + list[i][6] + '</text>\
					<text y="28" x="1440" font-size="18">' + list[i][7] + '</text>\
					<text y="28" x="1500" font-size="18">' + list[i][8] + '</text>\
					<a xlink: href="' + list[i][10] + '" target="_parent">\
						<rect height="25" width="374" y="9" x="158" fill-opacity="0" class="button" onmouseover="imageUpdate(\'' + list[i][9] + '\');" onmouseout="imageUpdate(\'\');"></rect>\
					</a>';
		entry.setAttribute("transform", 'translate(12 ' + pos.toString() + ')');

		list[i][12] = entry;//	store the visual element for each game in that game's list entry

		if (i != list.length - 1 && list[i][11] != list[i + 1][11]) {//		this line is sorted into the same group as the last line
			pos += 80;
			//		add catigory header here
		} else {
			pos += 40;
		}
	}

	//		check for broken links
	//window.requestAnimationFrame(checkBrokenLinks);

	document.getElementById("downloadLinks").setAttribute("transform", 'translate(760 ' + pos.toString() + ')');//		move download icons to bottom of page
	document.getElementById("svgViewBox").setAttribute("viewBox", "0 0 1600 " + (pos + 150).toString());//		move end of screen to be just after download links
//	console.log("Loaded list in\n" + Math.round(performance.now() - t).toString() + "ms");

	//	----------------------------------		[   Set Up Image   ]		----------------------------------
	screenShot = document.createElement("img");
	screenShot.setAttribute('style', 'opacity: 0.85;position: absolute;left: 50%; top: 100;margin-left: -300px;pointer-events: none; display: none');
	screenShot.setAttribute("width", "600");
	document.body.appendChild(screenShot);

	console.log("Loaded page in\n" + Math.round(performance.now() - t).toString() + "ms");

	function UrlExists(url) {//		FROM	https://forum.alphasoftware.com/showthread.php?94811-How-to-check-for-a-broken-link-bad-url
		var http = new XMLHttpRequest();
		http.open('HEAD', url[10], true);
		http.send();
		if (http.status != 200)
			console.log("URL for " + url[2] + "broken");
		return;
	}
	/*
	function checkBrokenLinks() {
		for (i = 0; i < 5; i++) {
			var request;
			if (window.XMLHttpRequest)
				request = new XMLHttpRequest();
			else
				request = new ActiveXObject("Microsoft.XMLHTTP");
			request.open('GET', 'http://www.mozilla.org', true);
			// the object request will be actually modified
			request.onload = function (e) {
				if (request.status === 200) {
					alert("The page you are trying to reach is not available.");
				}else{
					console.log("yay" + request.status);
				}
			}
			request.send(); // there will be a 'pause' here until the response to come.
		}
	}*/
	/*
	function checkBrokenLinks() {
		for (i = 0; i < 5; i++) {
			var http = new XMLHttpRequest();
			http.timeout = 4000;
			http.open('GET', list[i][10], true);
			http.onload = function(e){
				if (http.readyState === 4) {
					if (http.status === 200) {
						console.log("URL for " + list[i][2] + " working");
					} else {
						console.log("URL for " + list[i][2] + " broken");
					}
				}
			};

			http.onerror = function (e) {
				console.error(xhr.statusText);
			};

			http.send(null);
		//	if (http.status != 200)
		//		console.log(http.status + " URL for " + list[i][2] + " broken");
		}
	}*/

	//	----------------------------------		[   Update list after re-sort   ]		----------------------------------
	function listUpdate() {//		move all elements to their new positions in list
		t = performance.now();

		if(mainInput.style.display == "block")//		search is still active, leave room for search input field
			pos = 200;
		else
			pos = 140;
			
		for (i = 0; i < list.length; i++){
			//		check if a search is active and this element should be hidden
			if(useSearch){
				if(list[i][13]){
					list[i][12].style.display = "block";
				}else{
					list[i][12].style.display = "none";
					continue;
				}
			}
			
			list[i][12].setAttribute("transform", 'translate(12 ' + pos.toString() + ')');
			list[i][12].children[0].setAttribute('fill', backgroundColors[i % 3]);

			if (i != list.length - 1 && list[i][11] != list[i + 1][11]) {//		this line is sorted into the same group as the last line
				pos += 80;
				//		add catigory header here
			} else {
				pos += 40;
			}
		}
		document.getElementById("downloadLinks").setAttribute("transform", 'translate(760 ' + pos.toString() + ')');//		move download icons to bottom of page
		document.getElementById("svgViewBox").setAttribute("viewBox", "0 0 1600 " + (pos + 150).toString());//		move end of screen to be just after download links

		//console.log("Reloaded list in\n" + Math.round(performance.now() - t).toString() + "ms");
	}


	//	----------------------------------		[   Update Image   ]		----------------------------------
	function imageUpdate(imageLink) {
		if (imageLink == "") {
			fadeIn = false;
		} else if (window.innerWidth > 600) {//		screen is wide enough that images will not fill the whole page
			fadeIn = true;
			screenShot.style.display = "block";
			screenShot.style.top = Math.max(window.pageYOffset + 10, 100);
			screenShot.setAttribute("src", "GameListImages/" + imageLink + ".png");
			//		wait for image to load
			/*
			function waitForImageToLoad(imageElement) {
				return new Promise(resolve => { imageElement.onload = resolve })
			}

			var myImage = document.getElementById('myImage');
			var newImageSrc = "https://pmchollywoodlife.files.wordpress.com/2011/12/justin-bieber-bio-photo1.jpg?w=620"

			myImage.src = newImageSrc;
			waitForImageToLoad(myImage).then(() => {
				// Image have loaded.
				console.log('Loaded lol')
			});*/

		}
		if (!fading) {//		if imageFade() is not already running
			fading = true;
			imageFade();
		}
	}


	//	----------------------------------		[   Image Transition Animation   ]		----------------------------------
	var fadeIn = true;
	var fading = false;
	var fadeValue = 0.1;

	function imageFade() {
		//		shift fade value in direction set in imageUpdate()
		if (fadeIn) {
			fadeValue += 0.07;
		} else {
			fadeValue -= 0.05;
		}
		//		if fade ends, stop this function from being called again and set the final value to exactly what it should be.
		if (fadeValue > 0.93) {
			fadeValue = 0.93;//		set to 1 so there are 2 frames where the cursor is off the selection but the image has not started fading yet
			fading = false;
		} else if (fadeValue < 0) {
			fadeValue = 0;
			screenShot.style.display = "none";//		hide image
			fading = false;
		}
		screenShot.style.opacity = Math.min(fadeValue, 0.85);
		if (fading)//		fade has not reached its final value so call this function again next frame
			requestAnimationFrame(imageFade);
	}
	
	
	//	----------------------------------		[   Keyboard inputs for search bar   ]		----------------------------------
	document.addEventListener("keydown", function(e){
		if(!useSearch && e.keyCode >= 48 && e.keyCode <= 90){//		number or letter key was pressed and a search is not currently being run
			useSearch = true;
			mainInput.style.display = "block";
			mainInput.focus();
			mainInput.innerText = "";//String.fromCharCode(e.keyCode).toLowerCase();
			//		move header to make room for the search bar
			document.getElementById("listHeader").setAttribute("transform" , "translate(12 160)");

		}
		
		if(e.keyCode == 27){//		27		Escape key
			hideSearch();
		}
		
		//		update the search every time a key is pressed
		if(useSearch){
			window.requestAnimationFrame(nextFrameSearchUpdate);
		}
	});
	
	
	//	----------------------------------		[   Search bar resize   ]		----------------------------------
	window.addEventListener("resize", function(e){
		var screenWidth = document.documentElement.clientWidth * (window.devicePixelRatio || 1);
		mainInput.style.top = Math.round(screenWidth*0.05 - 25).toString() + "px";
		mainInput.style.left = Math.round(screenWidth*0.1).toString() + "px";
		mainInput.style.width = Math.round(screenWidth*0.8).toString() + "px";
	});
	
	//		this function is used so functions are called after the key press has updated the input field
	function nextFrameSearchUpdate(){
		searchString = mainInput.innerText.toLowerCase();
			
		//		search field empty. Remove input field.
		if(searchString == ''){
			hideSearch();
			return;
		}
		
		//		set all games not including the search term to not render
		for (i = 0; i < list.length; i++){
			//		if title, subject, or subject (specific) contains the search term, show it
			if((list[i][2].toLowerCase().indexOf(searchString) != -1) ||
				(list[i][3].toLowerCase().indexOf(searchString) != -1) ||
				(list[i][4].toLowerCase().indexOf(searchString) != -1)){
					list[i][13] = true;
			}else{
					list[i][13] = false;
			}
		}
		listUpdate();
	}
	
	function hideSearch(){
		mainInput.style.display = "none";
		mainInput.blur();
		//		set all games to show
		for (i = 0; i < list.length; i++){
			list[i][13] = true;
		}
		//		move header back
		document.getElementById("listHeader").setAttribute("transform" , "translate(12 100)");

		
		listUpdate();
		useSearch = false;
	}
</script>














